<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap-theme.min.css">
  <script src="../node_modules/jquery/dist/jquery.min.js"></script>
  <script src="../node_modules/angular/angular.min.js"></script>
  <script src="../node_modules/infinity/build/infinity.js"></script>
  <script src="../dist/utils.js"></script>
  <script src="../dist/ng-repeat-infinity.js"></script>
  <script src="http://localhost:35729/livereload.js"></script>
  <script>
    var rowCount = 10000;
    var testApp = angular.module('testApp', [
      'ng-repeat-infinity'
    ]).controller("myController", function($scope){
      $scope.items = [];
      for(var i=0; i < rowCount; i++)
      {
        $scope.items.push('Item Number'+i);
      } 
    });
    
    var start = new Date();
    setTimeout(function() {
      angular.element(document).ready(function() {
        angular.bootstrap(document, ['testApp']);
        var elapsedMs = (new Date()-start);
        var elapsed = (elapsedMs/1000).toFixed(2);
        $('#elapsed').html(elapsed);
        $('#elapsedper').html((elapsedMs/(rowCount/100)).toFixed());
      });    
    }, 500);
    
    $(document).ready(function() {
      var since = 0;
      $('#reloaded').html(since);
      setInterval(function() {
        since++;
        $('#reloaded').html(since);
        $('.loading').hide();
        $('.content').css('opacity', 1);
      }, 1000)
    })
  </script>

  <style>
    .content {
      opacity: 0;
    }
  </style>
</head>

<body ng-controller="myController" class="container">
  <h1>Test app for ng-repeat-infinity</h1>
  <a href="https://github.com/RobertjanTuit/ng-repeat-infinity" class="small" target="_blank">https://github.com/RobertjanTuit/ng-repeat-infinity</a>
  <div class="loading">
    <br/> Loading app with 10000 ng-repeat rows...
  </div>
  <div class="content">
    <div class="small">Last reload: <span id='reloaded'></span> seconds ago.</div>
    <br/>
    <div class="small">Angular app rendering 10000 rows took: <span id='elapsed'></span> seconds. <span id='elapsedper'></span>ms per 100 rows</div>
    <br/>
    <br/> List numbers test:
    <ol style="height:100%;overflow: auto;">
      <li ng-repeat-infinity="item in items">
        <div>{{ item }}</div>
      </li>
    </ol>
  </div>
</body>